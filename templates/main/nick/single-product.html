{% extends 'main/nick/base.html' %}
{% load static %}
{% load utils %}

{% block content %}

    <!-- BREADCRUMBS BOX-->
    <div class="container-fluid breadcrumbs-box mb-3">
        <div class="row">
            <div class="col-12">


                <!-- –û—Ç—Å—Ç—É–ø –ø–æ–¥ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∞–ø–∫—É -->
                <div class="header-offset"></div>

                <!-- BREADCRUMBS -->
                <div class="breadcrumbs-container mb-3">
                    <p class="breadcrumbs-title">{{ product.name }}</p>
                    <nav class="breadcrumbs">
                        <a href="{% url 'home' %}" class="breadcrumb-item">Home</a>
                        <span class="breadcrumb-separator">üëâüèº</span>
                        {% if product.category.all %}
                            {% with first_category=product.category.all.0 %}
                                <a href="{{ first_category.get_absolute_url }}"
                                   class="breadcrumb-item">{{ first_category.name }}</a>
                                <span class="breadcrumb-separator">üëâüèº</span>
                            {% endwith %}
                        {% endif %}

                        <span class="breadcrumb-item active">{{ product.name }}</span>
                    </nav>
                </div>
                <!-- END BREADCRUMBS -->

            </div>
        </div>
    </div>
    <!-- END BREADCRUMBS BOX -->


    <!-- 1 box 3 –∫–æ–ª–æ–Ω–∫–∏ -->
    <div class="container-fluid px-3">
        <div class="row">

            <!-- PRODUCT PHOTO SLIDER -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-5 col-xxl-5 mb-3">
                <div class="product-slider sticky-top">

                    <!-- Main Swiper -->
                    <div class="swiper single-product-slider">
                        <div class="swiper-wrapper">

                            <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ -->
                            {% if product.image %}
                                <div class="swiper-slide">
                                    <a href="{{ product.image.url }}" class="glightbox" data-gallery="product-gallery">
                                        <img src="{{ product.image.url }}" class="img-fluid"/>
                                    </a>
                                </div>
                            {% endif %}

                            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
                            {% for img in product.additional_images.all %}
                                <div class="swiper-slide">
                                    <a href="{{ img.image.url }}" class="glightbox" data-gallery="product-gallery">
                                        <img src="{{ img.image.url }}" class="img-fluid"/>
                                    </a>
                                </div>
                            {% empty %}
                                <!-- –ï—Å–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–µ—Ç, –º–æ–∂–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å -->
                            {% endfor %}

                        </div>
                    </div>

                    <!-- Thumbs -->
                    <div class="swiper thumbs-slider d-flex justify-content-center gap-2 mt-3 px-1">
                        <div class="swiper-wrapper">

                            <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
                            {% if product.image %}
                                <div class="swiper-slide" style="width: 50px">
                                    <img src="{{ product.image.url }}"
                                         class="img-fluid rounded border border-secondary"/>
                                </div>
                            {% endif %}

                            <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
                            {% for img in product.additional_images.all %}
                                <div class="swiper-slide" style="width: 50px">
                                    <img src="{{ img.image.url }}" class="img-fluid rounded border border-secondary"/>
                                </div>
                            {% endfor %}

                        </div>
                    </div>

                </div>
            </div>

            <!-- SHORT DESCRIPTION -->
            <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-5 col-xxl-5 mb-3">
                <div class="box mb-3 p-3">

                    <!-- Product Title -->
                    <h1 class="product-name-full fw-semibold pt-2" title="{{ product.name }}">
                        {{ product.name }}
                    </h1>

                    <!-- Product Badge -->
                    <div class="badge-container-on border-bottom pb-3">
                        {% if product.rating %}
                            <a href="#rating"><span
                                    class="product-badge badge-star">‚≠êÔ∏è {{ product.rating|normalize_rating }}</span></a>
                        {% endif %}
                        {% if product.is_not_stock %}
                            <span class="product-badge badge-out-of-stock">üö´ –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>
                        {% endif %}
                        {% if product.is_new_product %}
                            <span class="product-badge badge-new">New</span>
                        {% endif %}
                        {% if product.is_popular %}
                            <span class="product-badge badge-best">üî•BEST SELLER</span>
                        {% endif %}
                        {% if product.discount and product.discount > 0 %}
                            <span class="product-badge badge-discount">-{{ product.discount|floatformat:0 }}%</span>
                        {% endif %}
                        {% if product.is_sale %}
                            <span class="product-badge badge-sale">SALE</span>
                        {% endif %}
                        {% if product.is_main_slider %}
                            <span class="product-badge badge-hot">üå∂ HOT</span>
                        {% endif %}
                    </div>

                    <!-- Simple Product Price Block -->
                    <div class="price price-full border-bottom py-3">
                    <span class="fw-bold final-price">
                        <span class="currency-symbol">‚Çπ</span>
                         <span class="price-full final-price price-value"
                               data-inr={{ product.price }}> {{ product.price }}</span>
                         </span>
                        <span class="text-decoration-line-through text-danger original-price ms-2">
                        <span class="currency-symbol">‚Çπ</span>
                            <del class=" original-price price-value"> {{ product.price|random_increase }}</del>
                        </span>
                    </div>

                    <!-- Variation Product Price Block -->
                    <div class="price price-full variation-price border-bottom py-3">
                        <div class="d-flex justify-content-between">
                            <span class="min">Min:</span>
                            <span>
                        <span class="currency-symbol">‚Çπ</span>
                        <span class="min-price price-value" data-inr="999.999">999.999</span>
                      </span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span class="max">Max:</span>
                            <span>
                        <span class="currency-symbol">‚Çπ</span>
                        <span class="max-price price-value" data-inr="1500.999">1500.999</span>
                      </span>
                        </div>
                    </div>


                    <!-- Short Description -->
                    <div class="short-description border-bottom pt-3">
                        <h4>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</h4>
                        <p>
                            {{ product.desc|safe }}
                        </p>
                        {% if product.additional_description %}
                            <p class="text-muted">{{ product.additional_description|safe }}</p>
                        {% endif %}
                    </div>

                    <!-- Attributes -->
                    <ul class="attributes-card mt-auto py-3">
                        {% if product.brand %}
                            <li><a href="{{ product.brand.get_absolute_url }}"
                                   class="text-decoration-none">{{ product.brand.name }}</a></li>
                        {% endif %}
                        <li>
                            {% for cat in product.category.all %}
                                <a href="{{ cat.get_absolute_url }}" class="text-decoration-none">{{ cat.name }}</a>
                                {% if not forloop.last %}, {% endif %}
                            {% endfor %}
                        </li>
                        {# –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–≥–∏, –¥–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –±–ª–æ–∫ –¥–ª—è —Ç–µ–≥–æ–≤ #}
                    </ul>

                    <!-- PRODUCT ATTRIBUTES -->
                    <div class="product-attributes table-responsive">
                        <table class="table table-bordered table-sm align-middle">
                            <tbody>
                            {% if product.capacity %}
                                <tr>
                                    <th scope="row">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</th>
                                    <td>{{ product.capacity }}</td>
                                </tr>
                            {% endif %}
                            {% if product.color %}
                                <tr>
                                    <th scope="row">–¶–≤–µ—Ç</th>
                                    <td>{{ product.color }}</td>
                                </tr>
                            {% endif %}
                            {% if product.sizes %}
                                <tr>
                                    <th scope="row">–†–∞–∑–º–µ—Ä</th>
                                    <td>{{ product.sizes }}</td>
                                </tr>
                            {% endif %}
                            {% if product.material %}
                                <tr>
                                    <th scope="row">–ú–∞—Ç–µ—Ä–∏–∞–ª</th>
                                    <td>{{ product.material }}</td>
                                </tr>
                            {% endif %}
                            {% if product.volume_liters %}
                                <tr>
                                    <th scope="row">–û–±—ä–µ–º</th>
                                    <td>{{ product.volume_liters }} –ª</td>
                                </tr>
                            {% endif %}
                            {% if product.quantity %}
                                <tr>
                                    <th scope="row">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ</th>
                                    <td>{{ product.quantity }}</td>
                                </tr>
                            {% endif %}
                            {# –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ #}
                            </tbody>
                        </table>
                    </div>

                </div>
                <!-- END SHORT DESCRIPTION -->

                <!-- info box -->
                <div class="box border rounded p-3 mb-3">
                    <h5 class="mb-3">Information</h5>
                    <ul class="list-unstyled mb-0">
                        <li class="mb-2">üöö<strong>Delivery:</strong> Worldwide within 30 days</li>
                        <li class="mb-2">üîÅ<strong>Returns:</strong> Within 14 days of receipt</li>
                        <li class="mb-2">üí≥<strong>Payment:</strong> Card, PayPal, Cryptocurrency</li>
                        <li class="mb-2">üì¶<strong>Shipping:</strong> Within 48 hours after payment</li>
                    </ul>
                </div>
                <!-- END info box -->

                <!-- PRODUCT  -->
                <div class="box mb-3 p-3">

                    <!-- –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ -->
                    <div class="product-description mb-3">

                        <h2 class="mb-3">Product Description</h2>
                        <p>{{ product.desc }}</p>

                    </div>

                </div>
                <!-- END SHORT DESCRIPTION -->

                <!-- 2 box  -->
                <div class="box mb-3 p-3">

                    <!-- –†–µ–π—Ç–∏–Ω–≥ -->
                    <div id="rating" class="product-rating-summary border-bottom pt-3 mb-3">

                        <h3 class="mb-3">Customer Ratings</h3>

                        <!-- –í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤ -->
                        <div class="total-rating mb-3">
                            <strong class="fs-4">4.4</strong> –∏–∑ 5
                            <span class="text-muted ms-2">(23 –æ—Ç–∑—ã–≤–∞)</span>
                        </div>

                        <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ –∑–≤–µ–∑–¥–∞–º -->
                        <div class="rating-breakdown mb-3">

                            <div class="d-flex align-items-center mb-1">
                                <div class="me-2" style="width: 40px;">5 ‚≠ê</div>
                                <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                    <div class="progress-bar bg-success" style="width: 60%"></div>
                                </div>
                                <div class="text-muted small">14</div>
                            </div>

                            <div class="d-flex align-items-center mb-1">
                                <div class="me-2">4 ‚≠ê</div>
                                <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                    <div class="progress-bar bg-info" style="width: 20%"></div>
                                </div>
                                <div class="text-muted small">5</div>
                            </div>

                            <div class="d-flex align-items-center mb-1">
                                <div class="me-2">3 ‚≠ê</div>
                                <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                    <div class="progress-bar bg-secondary" style="width: 10%"></div>
                                </div>
                                <div class="text-muted small">2</div>
                            </div>

                            <div class="d-flex align-items-center mb-1">
                                <div class="me-2">2 ‚≠ê</div>
                                <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                    <div class="progress-bar bg-warning" style="width: 5%"></div>
                                </div>
                                <div class="text-muted small">1</div>
                            </div>

                            <div class="d-flex align-items-center mb-1">
                                <div class="me-2">1 ‚≠ê</div>
                                <div class="progress flex-grow-1 me-2" style="height: 8px;">
                                    <div class="progress-bar bg-danger" style="width: 5%"></div>
                                </div>
                                <div class="text-muted small">1</div>
                            </div>

                        </div>
                        <!-- END –¢–∞–±–ª–∏—Ü–∞ –ø–æ –∑–≤–µ–∑–¥–∞–º -->

                    </div>
                    <!-- END –†–µ–π—Ç–∏–Ω–≥ -->

                    <!-- –û—Ç3—ã–≤—ã -->
                    <div class="product-reviews mb-4">

                        <h3 class="mb-1">Reviews</h3>

                        <div class=" review-card review-section rounded p-3 mb-3">

                            <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É -->
                            <button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#review-form" aria-expanded="false" aria-controls="review-form">
                                üìù –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤
                            </button>

                            <!-- –°–∫—Ä—ã—Ç–∞—è —Ñ–æ—Ä–º–∞ -->
                            <div class="collapse" id="review-form">
                                <h5 class="my-3">Be the first to review ‚Äú{{ product.name }}‚Äù</h5>

                                <!-- Rating stars -->
                                <div class="mb-3">
                                    <label class="form-label d-block">Your Rating *</label>
                                    <div class="rating-stars">
                                        <input type="radio" name="rating" id="star5" value="5"><label
                                            for="star5">‚≠ê</label>
                                        <input type="radio" name="rating" id="star4" value="4"><label
                                            for="star4">‚≠ê</label>
                                        <input type="radio" name="rating" id="star3" value="3"><label
                                            for="star3">‚≠ê</label>
                                        <input type="radio" name="rating" id="star2" value="2"><label
                                            for="star2">‚≠ê</label>
                                        <input type="radio" name="rating" id="star1" value="1"><label
                                            for="star1">‚≠ê</label>
                                    </div>
                                </div>

                                <!-- Review textarea -->
                                <div class="mb-3">
                                    <label for="review" class="form-label">Your Review *</label>
                                    <textarea id="review" class="form-control" rows="5" required></textarea>
                                </div>

                                <!-- Submit -->
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </div>
                        </div>

                        <!-- –û—Ç–∑—ã–≤—ã —Å–ø–∏—Å–æ–∫ -->
                        <div class="review-list">

                            <!-- –æ—Ç–∑—ã–≤ -->
                            <div class="review-card rounded p-3 mb-4">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <strong>MacMike</strong>
                                    <span class="text-warning fs-5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                </div>
                                <p class="text-muted mb-1 strong">5.0 out of 5 stars</p>
                                <small class="text-secondary mb-1">Reviewed in the United States on December 2,
                                    2024</small>
                                <span class="bg-success-subtle p-1 rounded text-success small">‚úî Verified Purchase</span>
                                <div class="review-text mt-2">
                                    <p>I've been using this phone for a full year now, so I feel I've used it enough to
                                        give a fair assessment.
                                        Bottom line: best phone I've ever owned.</p>
                                </div>
                                <div class="text-muted small mt-3 d-flex justify-content-between">
                                    <span>üëç 18 like it</span>
                                    <a href="#" class="text-decoration-none">Report</a>
                                </div>
                            </div>
                            <!-- END –æ—Ç–∑—ã–≤ -->
                            <!-- –æ—Ç–∑—ã–≤ -->
                            <div class="review-card rounded p-3 mb-4 d-none">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <strong>MacMike</strong>
                                    <span class="text-warning fs-5">‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                </div>
                                <p class="text-muted mb-1 strong">5.0 out of 5 stars</p>
                                <small class="text-secondary mb-1">Reviewed in the United States on December 2,
                                    2024</small>
                                <span class="bg-success-subtle p-1 rounded text-success small">‚úî Verified Purchase</span>
                                <div class="review-text mt-2">
                                    <p>I've been using this phone for a full year now, so I feel I've used it enough to
                                        give a fair assessment.
                                        Bottom line: best phone I've ever owned.</p>
                                </div>
                                <div class="text-muted small mt-3 d-flex justify-content-between">
                                    <span>üëç 18 like it</span>
                                    <a href="#" class="text-decoration-none">Report</a>
                                </div>
                            </div>
                            <!-- END –æ—Ç–∑—ã–≤ -->
                            <!-- –æ—Ç–∑—ã–≤ -->
                            <div class="review-card rounded p-3 mb-4 d-none">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <strong>MacMike</strong>
                                    <span class="text-warning fs-5">‚≠ê‚≠ê‚≠ê</span>
                                </div>
                                <p class="text-muted mb-1 strong">5.0 out of 5 stars</p>
                                <small class="text-secondary mb-1">Reviewed in the United States on December 2,
                                    2024</small>
                                <span class="bg-success-subtle p-1 rounded text-success small">‚úî Verified Purchase</span>
                                <div class="review-text mt-2">
                                    <p>I've been using this phone for a full year now, so I feel I've used it enough to
                                        give a fair assessment.
                                        Bottom line: best phone I've ever owned.</p>
                                </div>
                                <div class="text-muted small mt-3 d-flex justify-content-between">
                                    <span>üëç 18 like it</span>
                                    <a href="#" class="text-decoration-none">Report</a>
                                </div>
                            </div>
                            <!-- END –æ—Ç–∑—ã–≤ -->

                        </div>

                    </div>

                </div>
                <!-- END 2 box  -->

            </div>
            <!-- END SHORT DESCRIPTION -->

            <!-- SIDEBAR -->
            <div class="col-12 col-sm-12 col-md-3 col-lg-12 col-xl-2 col-xxl-2 d-none d-lg-block">

                <!-- Navigation box -->
                <div class="product-navigation box p-3 rounded">
                    <!-- –¶–µ–Ω–∞ -->
                    <div class="price border-bottom pb-3">
                  <span class="fw-bold">
                    <span class="currency-symbol">‚Çπ</span>
                    <span class="price-value" data-inr="100">100</span>
                  </span>
                    </div>

                    <!-- –í—ã–±—Ä–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏ -->
                    <div class="border-bottom py-3">
                        <div class="d-flex justify-content-between"><span>Size:</span><span
                                class="fw-bold size-value">-</span></div>
                        <div class="d-flex justify-content-between"><span>Options:</span><span
                                class="fw-bold option-value">-</span></div>
                        <div class="d-flex justify-content-between"><span>Color:</span><span
                                class="fw-bold color-value">-</span></div>
                    </div>

                    <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
                    <div class="input-group my-3">
                        <button class="btn btn-outline-secondary" type="button">-</button>
                        <input type="number" class="form-control text-center" value="1" min="1" step="1">
                        <button class="btn btn-outline-secondary" type="button">+</button>
                    </div>

                    <!-- –†–∞–∑–º–µ—Ä -->
                    <div class="product-variations border-bottom py-3">
                        <label class="fw-semibold mb-2 d-block">Size:</label>
                        <div class="d-flex flex-wrap gap-2">
                            <button type="button" class="btn btn-outline-secondary btn-variation active" data-price="0">
                                XS
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-variation" data-price="10">S
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-variation" data-price="15">M
                            </button>
                        </div>
                    </div>

                    <!-- –û–ø—Ü–∏–∏ -->
                    <div class="product-variations border-bottom py-3">
                        <label class="fw-semibold mb-2 d-block">Options:</label>
                        <div class="d-flex flex-wrap gap-2">
                            <button type="button" class="btn btn-outline-secondary btn-variation active" data-price="0">
                                Option 1
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-variation" data-price="25">Option
                                2
                            </button>
                        </div>
                    </div>

                    <!-- –¶–≤–µ—Ç -->
                    <div class="product-variations py-3">
                        <label class="fw-semibold mb-2 d-block">Color:</label>
                        <div class="color-boxes d-flex flex-wrap gap-1">
                            <label class="color-box" style="--color: red"><input type="checkbox" value="red"
                                                                                 data-price="5"></label>
                            <label class="color-box" style="--color: blue"><input type="checkbox" value="blue"
                                                                                  data-price="8"></label>
                            <label class="color-box" style="--color: green"><input type="checkbox" value="green"
                                                                                   data-price="0"></label>
                        </div>
                    </div>
                </div>
                <!-- END Navigation box -->

            </div>
            <!-- END SIDEBAR -->

        </div>
    </div>
    <!-- END 1 box 3 –∫–æ–ª–æ–Ω–∫–∏ -->

    <!-- mobile bottom bar -->
    <div class="mobile-bottom-bar">

        <div class="d-flex align-items-center d-md-none gap-2">
            <button class="btn-box wish-btn flex-shrink-0 w-10" aria-label="Wishlist">üíñ</button>
            <button class="btn-box wish-btn flex-shrink-0 w-10" aria-label="Compare products">‚öñÔ∏è</button>
            <button class="add-to-cart btn btn-primary w-100">ADD TO CART</button>
        </div>

    </div>
    <!-- END mobile bottom bar -->

    <!-- OFFCANVAS -->
    <div class="offcanvas-container">

        <!-- SIDE MENU -->
        {% include 'main/nick/side_menu.html' %}
        <!-- END SIDE MENU -->

        <!-- WISHLIST SIDE MENU -->
        {% include 'main/nick/wishlist.html' %}

        <!-- –û–≤–µ—Ä–ª–µ–π -->
        <div id="overlay" class="overlay"></div>

        <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –∫–æ—Ä–∑–∏–Ω—ã -->
        {% include 'main/nick/sidebar_menu_cart.html' %}
        <!-- END –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –∫–æ—Ä–∑–∏–Ω—ã -->

        <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã -->
        <div id="cartOverlay" class="overlay"></div>

    </div>
    <!-- END OFFCANVAS -->

{% endblock %}
